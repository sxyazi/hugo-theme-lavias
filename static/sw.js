const f="4f4cc652",h=t=>{var n;const e=(n=t.split("/").pop())!=null?n:"";return!!(["favicon.ico","manifest.json"].includes(e)||/.+\.[a-z0-9]{8}\.(js|json|css)$/.test(e)||/^\/?[^\/]+-\d+x\d+\.png$/.test(t))},d=(t,e)=>{if(t.byteLength!==e.byteLength)return!1;const n=new Int8Array(t),a=new Int8Array(e);for(let s=0;s<t.byteLength;s++)if(n[s]!=a[s])return!1;return!0};self.addEventListener("install",t=>{t.waitUntil(self.skipWaiting())});self.addEventListener("activate",t=>{t.waitUntil(async function(){await self.clients.claim(),await caches.keys().then(e=>e.filter(n=>n!==f)).then(e=>Promise.all(e.map(n=>caches.delete(n))))}())});const w=new URL(self.registration.scope).hostname;self.addEventListener("fetch",t=>{const{request:e}=t,n=new URL(t.request.url);if(n.hostname!==w)return;const a=e.headers.get("x-swr");return t.respondWith(async function(){const s=await caches.match(e);if(s&&h(n.pathname))return s;const l=fetch(e).then(r=>{if(r.status>=400)return r;const u=r.clone();if(caches.open(f).then(c=>c.put(e,u)),a&&s){const c=s.clone();r.clone().arrayBuffer().then(async i=>{if(d(i,await c.arrayBuffer()))return;const o=await self.clients.get(t.clientId);o==null||o.postMessage({type:"SWR",version:f,path:n.pathname,buf:i},[i])})}return r});return s!=null?s:l}())});
