const o="ed6b1e7b",h=e=>{const t=e.split("/").pop()??"";return!!(["favicon.ico","manifest.json"].includes(t)||/.+\.[\da-z]{8}\.(js|json|css)$/.test(t)||/^\/?[^/]+-\d+x\d+\.png$/.test(e))},d=(e,t)=>{if(e.byteLength!==t.byteLength)return!1;const s=new Int8Array(e),r=new Int8Array(t);for(let n=0;n<e.byteLength;n++)if(s[n]!==r[n])return!1;return!0};self.addEventListener("install",e=>{e.waitUntil(self.skipWaiting())});self.addEventListener("activate",e=>{e.waitUntil(async function(){await caches.keys().then(t=>t.filter(s=>s!==o)).then(t=>Promise.all(t.map(s=>caches.delete(s))))}())});const y=new URL(self.registration.scope).hostname;self.addEventListener("fetch",e=>{const{request:t,clientId:s}=e,r=new URL(t.url);if(r.hostname===y)return e.respondWith(async function(){const n=await caches.match(t);if(n&&h(r.pathname))return n;const f=t.headers.get("x-swr")&&(n==null?void 0:n.clone()),l=fetch(t).then(a=>{if(a.status>=400)return a;const u=a.clone();return caches.open(o).then(i=>i.put(t,u)),f&&a.clone().arrayBuffer().then(async i=>{if(d(i,await f.arrayBuffer()))return;const c=await self.clients.get(s);c==null||c.postMessage({type:"SWR",version:o,path:r.pathname,buf:i},[i])}),a});return n??l}())});
